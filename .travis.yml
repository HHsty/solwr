language:
- node_js
node_js:
- '5'
install:
- npm install
notifications:
  email: false
env:
- NODE_ENV=dev
deploy:
  provider: npm
  skip_cleanup: true
  email: demircanomer91@gmail.com
  api_key:
    secure: NVIdRRfkdmVwS7Gk22qpGOOimY28QnRHBVDbFmX9KnzeL8kP6AXM4HCV5FG9zjzPZw2mE8TfZ0rrYWXtSkyjkDX10l42yI+tH8nfXtYfZdw6kmVbLUg/DDHgByvF/FoIJAfQHzvjvh/IhJdEfLr5cQb0cxQEu4tta2xvra/alszBN3+BJQxauYsGyevkZzhavDfDXKT3pJ5nyhE+1WeT3jJrH1RavB6o3M0YR5tdvf77H78M2C58W+RFH0WMk+nJbvC2k3eW8GiZof0MzuAS6qjiFBH9QPd4W5/Y0SaVWX9Al216mfR4HNxe4JFJ1wLtSOWT9hAwNoIaObcOLl2gn55ih1Gpl8K3QmVaWBkzNfH5lFKO/lhWSJHOdEztGJgqzH0owAO1c8L8rU+mUO20FmZwi5tUepRVju1Pou2iTDp8wy+Tq4SfjZQ5aW5J9RaOcQvPSZ1x6nj/j78RA5zGcweeQAw3tgwTLEQrDU+Hf9K+s61L3qx6aUA90WMv4GbEEb865SNNqbb+NbLNz2tY4+dD3BdzCkwLG0mVqjjM7CijLbrZPDxghBUnDx1CDwxI1lpLkSFU4YCXpHi/nS+mbrotenxfTNndauusAXOhmukbNu5AefOgcz1CRv80xKJu0poAof1RRYD1tTvbZ/zSeifOnheqvgJ9fGDNJA47FEE=
  on:
    tags: true
    all_branches: true
before_install:
- sudo apt-get install tar -y
before_script:
- npm install -g mocha
- wget http://apache.mirror1.spango.com/lucene/solr/5.5.4/solr-5.5.4.tgz
- tar xzf solr-5.5.4.tgz solr-5.5.4/bin/install_solr_service.sh --strip-components=2
- sudo bash ./install_solr_service.sh solr-5.5.4.tgz
- sudo su - solr create_core -c '/opt/solr/bin/solr create_core -c querytest'
- sudo su - solr create_core -c '/opt/solr/bin/solr create_core -c products'
